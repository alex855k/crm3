"use strict";$(document).ready(function(){function t(n,t){$(":input",n).not(t).val("");$(".product:not(:last)").remove()}function n(){var n=$(".product").last(),i=$(n).find("[name='product']"),r=$(n).find("[name='quantity']"),t;i.val()&&r.val()>0&&(r.addClass("valid"),t=$(n).clone(!0),t.find(".editable-cancel").css("display","inline-block"),t.find(".editable-submit").css("display","none"),t.css("display","none"),$(t).insertBefore(n).slideDown("fast"),r.val(1),i.val(""),n.find(".input.state-success").removeClass("state-success"),n.find(".valid").removeClass("valid"),i.focus())}function i(){var t=[],n={};return $(".orderProducts").each(function(i,r){n.Product=$(r).find(".productInput").val();n.Quantity=$(r).find(".quantityInput").val();n.OrderId=$("#OrderId").val();t.push(n);n={}}),t.pop(),t}$.validator.setDefaults({onkeyup:!1,onfocusout:!0,onsubmit:!0});$(".product").last().find(".btn-sm.editable-submit").click(function(){return n(),!1});$(".product").last().keypress(function(t){if(t.which==13)return n(),!1});$(".product").find(".btn-sm.editable-cancel").click(function(n){var t=$(n.currentTarget.closest(".product"));return t.slideUp("fast",function(){t.remove()}),!1});$("#createOrderForm").submit(function(n){if(n.preventDefault(),$("#createOrderForm").valid()){var r={};r.Id=$("#OrderId").val();r.Street=$("#Street").val();r.HouseNr=$("#HouseNr").val();r.DispatchDate=$("#DispatchDate").val();r.CustomerId=$("#CustomerSelect").find(":selected").attr("customer-id");r.StatusId=$("#StatusId").val();r.PostalCode=$("#PostalCode").val();r.Town=$("#Town").val();r.OrderedProducts=i();$.ajax({url:"/Orders/Create",data:{viewModel:r},type:"POST",success:function(n){var i=new TransactionResponse;i=n.response;n.success==!0?i.TransactionType==TransactionType[TransactionType.Create]?(toastr.success(i.ResponseMessage),t("#createOrderForm","")):i.TransactionType==TransactionType[TransactionType.Update]&&toastr.success(i.ResponseMessage):toastr.warning(i.ResponseMessage)},error:function(){toastr.error("order save failed")}})}})});