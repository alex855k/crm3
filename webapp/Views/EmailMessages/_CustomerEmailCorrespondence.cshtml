@model CRM.Application.Core.ViewModels.EmailMessageViewModel
@{
    Layout = null;
}
@Html.HiddenFor(x => x.CustomerId, new { @id="CustomerId"})
<div id="datatable_fixed_column_wrapper" class="dataTables_wrapper form-inline no-footer">
    <div class="dt-toolbar">
        <div class="col-xs-12 col-sm-6 hidden-xs">
            <div id="datatable_fixed_column_filter" class="dataTables_filter">
                <label>
                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                    <input disabled id="commonFilter" type="search" class="form-control" placeholder="" aria-controls="datatable_fixed_column">
                </label>
            </div>
        </div><div class="col-sm-6 col-xs-12 hidden-xs">

            @*<div class="toolbar">
                <div class="text-right">
                    //buttons go here
                </div>
            </div>*@
        </div>
    </div>
    <table id="datatable_fixed_column" class="table table-striped table-bordered dataTable no-footer" width="100%" role="grid" aria-describedby="datatable_fixed_column_info" style="width: 100%;">
        <thead>
            <tr id="filterTr" role="row">

                <th class="hasinput" style="width:16%" rowspan="1" colspan="1">

                    <div class="input-group date" data-provide="datepicker">
                        <input disabled id="dateSent" type="text" data-searchKey="DateSent" data-selectedOperator="Contains" class="form-control query defaultSort" data-date-format="dd/mm/yyyy"
                               placeholder="">
                        <div class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </div>
                    </div>
                </th>
                <th class="hasinput" style="width:17%" rowspan="1" colspan="1">
                    <div class="input-group">
                        <input id="subject" data-searchKey="Subject" data-selectedOperator="Contains" class="form-control query" placeholder="@CRM.Application.Core.Resources.DynamicTable.Filtering.Filter @CRM.Application.Core.Resources.Email.Email.Subject" type="text">
                        <div style="padding:5px" class="input-group-addon">
                            <div class="btn-group">
                                <button class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
                                    <span class="fa fa-filter"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="operatorDropdown" data-operator="Contains" data-forInput="subject" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterContains</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="StartsWith" data-forInput="subject" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterStartsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="EndsWith" data-forInput="subject" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEndsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="Equals" data-forInput="subject" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEquals</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="NotEqual" data-forInput="subject" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterNotEqual</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </th>
                <th class="hasinput" style="width:17%" rowspan="1" colspan="1">
                    <div class="input-group">
                        <input id="sender" data-searchKey="Sender" data-selectedOperator="Contains" class="form-control query" placeholder="@CRM.Application.Core.Resources.DynamicTable.Filtering.Filter @CRM.Application.Core.Resources.Email.Email.Sender" type="text">
                        <div style="padding:5px" class="input-group-addon">
                            <div class="btn-group">
                                <button class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
                                    <span class="fa fa-filter"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="operatorDropdown" data-operator="Contains" data-forInput="sender" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterContains</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="StartsWith" data-forInput="sender" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterStartsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="EndsWith" data-forInput="sender" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEndsWith</a>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </th>
                <th class="hasinput" style="width:17%" rowspan="1" colspan="1">
                    <div class="input-group">
                        <input id="recipients" data-searchKey="Recipients" data-selectedOperator="Contains" class="form-control query" placeholder="@(CRM.Application.Core.Resources.General.General.Filter + " " + CRM.Application.Core.Resources.Email.Email.Recipients)" type="text">
                        <div style="padding:5px" class="input-group-addon">
                            <div class="btn-group">
                                <button class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
                                    <span class="fa fa-filter"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="operatorDropdown" data-operator="Contains" data-forInput="recipients" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterContains</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="StartsWith" data-forInput="recipients" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterStartsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="EndsWith" data-forInput="recipients" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEndsWith</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </th>
                <th class="hasinput" style="width:17%" rowspan="1" colspan="1">
                    <div class="input-group">
                        <input id="concerningCustomer" data-searchKey="ConcerningCustomer" data-selectedOperator="Contains" class="form-control query"
                               placeholder="@(CRM.Application.Core.Resources.General.General.Filter+" "+CRM.Application.Core.Resources.Email.Email.ConcerningCustomer)"
                               type="text" value="@Model.CustomerCompanyName">
                        <div style="padding:5px" class="input-group-addon">
                            <div class="btn-group">
                                <button class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
                                    <span class="fa fa-filter"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="operatorDropdown" data-operator="Contains" data-forInput="concerningCustomer" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterContains</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="StartsWith" data-forInput="concerningCustomer" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterStartsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="EndsWith" data-forInput="concerningCustomer" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEndsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="Equals" data-forInput="concerningCustomer" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEquals</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="NotEqual" data-forInput="concerningCustomer" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterNotEqual</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </th>
                <th class="hasinput" style="width:17%" rowspan="1" colspan="1">
                    <div class="input-group">
                        <input id="emailAccountHostName" data-searchKey="EmailAccountHostName" data-selectedOperator="Contains" class="form-control query" placeholder="@(CRM.Application.Core.Resources.General.General.Filter +" "+ CRM.Application.Core.Resources.Email.Email.HostName)" type="text">
                        <div style="padding:5px" class="input-group-addon">
                            <div class="btn-group">
                                <button class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
                                    <span class="fa fa-filter"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="operatorDropdown" data-operator="Contains" data-forInput="emailAccountHostName" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterContains</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="StartsWith" data-forInput="emailAccountHostName" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterStartsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="EndsWith" data-forInput="emailAccountHostName" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEndsWith</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="Equals" data-forInput="emailAccountHostName" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterEquals</a>
                                    </li>
                                    <li>
                                        <a class="operatorDropdown" data-operator="NotEqual" data-forInput="emailAccountHostName" href="javascript:void(0);">@CRM.Application.Core.Resources.DynamicTable.Filtering.FilterNotEqual</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </th>
            </tr>
            <tr role="row">
                <th class="sortTable sorting_desc" data-sortKey="dateSent" tabindex="0" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-sort="descending" aria-label="Name: activate to sort column descending" style="width: 187px;">
                    @CRM.Application.Core.Resources.Email.Email.DateSent
                </th>
                <th class="sortTable sorting" data-activesort="" data-sort="" tabindex="1" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 200px;">
                    @CRM.Application.Core.Resources.Email.Email.Subject
                </th>
                <th class="sortTable sorting" data-sortKey="Address" tabindex="2" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 200px;">
                    @CRM.Application.Core.Resources.Email.Email.Sender
                </th>
                <th tabindex="3" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 178px;">
                    @CRM.Application.Core.Resources.Email.Email.Recipients
                </th>
                <th tabindex="4" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 178px;">
                    @CRM.Application.Core.Resources.Email.Email.ConcerningCustomer
                </th>
                <th tabindex="5" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 178px;">
                    @CRM.Application.Core.Resources.Email.Email.HostName
                </th>
                <th tabindex="6" aria-controls="datatable_fixed_column" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 178px;">
                    @CRM.Application.Core.Resources.General.General.Actions
                </th>
            </tr>
        </thead>
        <tbody id="emailMessagesListDiv">
            @{Html.RenderPartial("_EmailMessageList", Model);}
        </tbody>
    </table>
    <div id="emailMessagePaginationDiv">
        @{Html.RenderPartial("_EmailMessagePagination", Model);}
    </div>
</div>
<div class="row smart-form">
    <section class="col col-3">
        <label class="toggle">
            @Html.HiddenFor(x => x.QueryOperatorComparer, new { @name = "tableComparer", @id = "hiddenTableComparer" })
            <input type="checkbox" id="switchTableComparer" name="checkbox-toggle" checked="checked">
            <i data-swchon-text="@CRM.Application.Core.Resources.DynamicTable.Filtering.And" data-swchoff-text="@CRM.Application.Core.Resources.DynamicTable.Filtering.Or"></i> @CRM.Application.Core.Resources.DynamicTable.Filtering.SearchComparer
        </label>
    </section>
</div>

<link href="~/Scripts/plugin/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet" />
<script src="~/Scripts/plugin/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="~/Scripts/CRM/Email/CustomerEmailCorrespondence.js"></script>
<script src="~/Scripts/CRM/Enum/SortDirection.js"></script>